# TCP time_wait的作用

https://www.iteblog.com/archives/169.html

1. 确保客户端和服务端均终止了连接 ，四次挥手 需要正常接收
2. 如果 客户端 没有进行TIME_WAIT， 在发出FIN的时候可能就结束了连接，此时 服务端会发送FIN，及ACK确认，如果 客户端没有回复ACK确认信号，服务端会重发信号，如果此时客户端与服务端建立起相同端口的连接，这个新的连接可能会收到老的连接的信号导致异常


## 1）可靠地实现TCP全双工连接的终止

在进行关闭连接四路握手协议时，最后的ACK是由主动关闭端发出的，如果这个最终的ACK丢失，服务器将重发最终的FIN，因此客户端必须维护状态信息允 许它重发最终的ACK。如果不维持这个状态信息，那么客户端将响应RST分节，服务器将此分节解释成一个错误（在java中会抛出connection reset的SocketException)。因而，要实现TCP全双工连接的正常终止，必须处理终止序列四个分节中任何一个分节的丢失情况，主动关闭 的客户端必须维持状态信息进入TIME_WAIT状态。

## 2）允许老的重复分节在网络中消逝

TCP分节可能由于路由器异常而“迷途”，在迷途期间，TCP发送端可能因确认超时而重发这个分节，迷途的分节在路由器修复后也会被送到最终目的地，这个 原来的迷途分节就称为lost duplicate。在关闭一个TCP连接后，马上又重新建立起一个相同的IP地址和端口之间的TCP连接，后一个连接被称为前一个连接的化身 （incarnation)，那么有可能出现这种情况，前一个连接的迷途重复分组在前一个连接终止后出现，从而被误解成从属于新的化身。为了避免这个情 况，TCP不允许处于TIME_WAIT状态的连接启动一个新的化身，因为TIME_WAIT状态持续2MSL，就可以保证当成功建立一个TCP连接的时 候，来自连接先前化身的重复分组已经在网络中消逝。


# 数据库insert之后，发生了什么，各个方面

1. 插入数据到相应的位置
2. 更新索引
3. 索引落地



# LRU算法及实现

https://www.ctolib.com/topics-130618.html



# 操作系统的进程通信方式，僵尸进程和孤儿进程是什么，如何避免僵尸进程，我说让父进程显示通知，那父进程怎么知道子进程结束了

**孤儿进程：一个父进程退出，而它的一个或多个子进程还在运行，那么那些子进程将成为孤儿进程。孤儿进程将被init进程(进程号为1)所收养，并由init进程对它们完成状态收集工作。**

**僵尸进程：一个进程使用fork创建子进程，如果子进程退出，而父进程并没有调用wait或waitpid获取子进程的状态信息，那么子进程的进程描述符仍然保存在系统中。这种进程称之为僵死进程。**

https://www.cnblogs.com/Anker/p/3271773.html



#  Linux的共享内存如何实现

https://www.jb51.net/article/118285.htm

通过虚拟内存映射到同一块物理内存



#  线程安全

https://www.tyloafer.cn/archives/detail/100



# zval hash array

https://www.tyloafer.cn/archives/detail/98



# Redis 耗时的结构

https://blog.csdn.net/hanhuili/article/details/17710781





# 一个二叉树，找到二叉树中最长的一条路径。



# IO有哪些？阻塞IO和多路IO的区别？

https://www.cnblogs.com/Anker/p/3265058.html

https://zhuanlan.zhihu.com/p/43933717



# 线程池调度算法设计



# DNS及DNS解析请求全过程

Domain Name System

http://www.ttlsa.com/web/httpdns-detailed-service/

###### 1：DNS劫持

- 劫持流程

  DNS劫持又称

  域名劫持，是指在劫持的网络范围内拦截域名解析的请求，分析请求的域名，把审查范围以外的请求放行，否则返回假的IP地址或者什么都不做使请求失去响应，其效果就是对特定的网络不能访问或访问的是假网址。其实本质就是对DNS解析服务器做手脚，或者是使用伪造的DNS解析服务器可以通过下图来展示

  ![DNS劫持原理](https://user-gold-cdn.xitu.io/2017/9/14/eadef534e6c4347b6e2e6feb91e97b89?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)DNS劫持原理

  从图中可以看出红色的是劫持的流程，劫持后将你的请求转发到一个虚假的服务器。

- 解决办法
  DNS的劫持过程是通过攻击运营商的解析服务器来达到目的。我们可以不用运营商的DNS解析而使用自己的解析服务器或者是提前在自己的App中将解析好的域名以IP的形式发出去就可以绕过运营商DNS解析，这样一来也避免了DNS劫持的问题。



###### 2：DNS解析

1. 系统会检查浏览器缓存中有没有这个域名对应的解析过的IP地址，如果缓存中有，这个解析过程就将结束。浏览器缓存是受这个域名的失效时间和缓存的空间大小控制的。

2. 如果用户的浏览器缓存中没有，浏览器会查找操作系统缓存中即为本地的Host文件。

3. 如果本地Host文件中没有那么操作系统会把这个域名发送给这里设置的LocalDNS，也就是本地区的域名服务器。这个DNS通常都提供给你本地互联网接入的一个DNS解析服务。这个专门的域名解析服务器性能都会很好，它们一般都会缓存域名解析结果，当然缓存时间是受域名的失效时间控制的，一般缓存空间不是影响域名失效的主要因素。大约90%的域名解析都到这里就已经完成了，所以LDNS主要承担了域名的解析工作。

4. 如果LDNS仍然没有命中，就直接到Root Server域名服务器请求解析

5. 根域名服务器返回给本地域名服务器一个所查询的域的主域名服务器（gTLD Server）地址。gTLD是国际顶级域名服务器，如.com，.cn、.org等。全球只有13台左右。

6. 本地域名服务器（Local DNS Server）再向上一步返回的gTLD服务器发送请求。

7. 接受请求的gTLD服务器查找并返回此域名对应的Name Server域名服务器的地址，这个Name Server通常就是你注册的域名服务器，例如你在某个域名服务提供商申请的域名，那么这个域名解析任务就由这个域名提供商的服务器来完成

8. Name Server域名服务器会查询存储的域名和IP的映射关系表，正常情况下都根据域名得到目标IP记录，连同一个TTL值返回给DNS Server域名服务器。

9. 返回该域名对应的IP和TTL值，Local DNS Server会缓存这个域名和IP的对应关系，缓存的时间由TTL值控制。

10. 把解析的结果返回给用户，用户根据TTL值缓存在本地系统缓存中，域名解析过程结束。
  以上的流程可以简化为下图



# 缓存雪崩等

https://blog.csdn.net/zeb_perfect/article/details/54135506



# 一致性hash导致 缓存请求不均衡

https://my.oschina.net/wxwwuxianwei/blog/639152





# ping命令是什么协议

https://blog.csdn.net/will130/article/details/49905131